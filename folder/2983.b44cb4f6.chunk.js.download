"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[2983],{82983:(e,a,t)=>{t.d(a,{t:()=>y,u:()=>E});var l=t(64117),o=t(82911),r=t(14201),s=t(99213),n=t(32485),i=t.n(n),c=t(46),g=t(56868),f=t(25182);const m=`${c.Z.prefix}--tag-set-modal`,d={modalAriaLabel:"List of all tags",searchLabel:""},h=e=>{let{allTags:a,className:t,title:r,modalAriaLabel:n=d.modalAriaLabel,onClose:c,open:g,portalTarget:h,searchLabel:p=d.searchLabel,searchPlaceholder:u,...A}=e;const[T,_]=(0,o.useState)([]),[b,v]=(0,o.useState)(""),w=(0,f.X)(h);(0,o.useEffect)(()=>{let e=[];if(g)if(""===b&&a)e=a?.slice(0);else{const t=b.toLocaleLowerCase();a?.forEach(a=>{const l=a["data-search"]?.toLocaleLowerCase()?.indexOf(t),o=a.label?.toLocaleLowerCase()?.indexOf(t);(l>-1||o>-1)&&e.push(a)})}_(e)},[a,g,b]);return w(o.createElement(s.ComposedModal,(0,l._)({},A,{containerClassName:`${m}__container`,className:i()(t,`${m}`),size:"sm",open:g,onClose:c}),o.createElement(s.ModalHeader,{className:`${m}__header`,closeModal:c,title:r},o.createElement(s.Search,{"data-modal-primary-focus":!0,className:`${m}__search`,labelText:p,placeholder:u,onChange:e=>{v(e.target.value||"")},size:"lg"})),o.createElement(s.ModalBody,{className:`${m}__body`,hasForm:!0,hasScrollingContent:!0,"aria-label":n},T.map((e,a)=>{let{label:t,...r}=e;return o.createElement(s.Tag,(0,l._)({},r,{key:`all-tags-${a}`}),t)}),o.createElement("div",{className:`${m}__fade`}))))};h.propTypes={allTags:r.A.arrayOf(r.A.shape({...(0,g.Gr)(s.Tag.propTypes,"filter"),label:r.A.string.isRequired})),className:r.A.string,onClose:r.A.func,open:r.A.bool,portalTarget:r.A.node,searchLabel:r.A.string,searchPlaceholder:r.A.string,title:r.A.string},h.displayName="TagSetModal";const p=`${c.Z.prefix}--tag-set-overflow`,u={allTagsModalSearchThreshold:10},A=o.forwardRef((e,a)=>{let{allTagsModalSearchThreshold:t=u.allTagsModalSearchThreshold,onOverflowClick:r,className:n,onShowAllClick:c,overflowAlign:g="bottom",overflowAutoAlign:f,overflowTags:m,overflowType:d,showAllTagsLabel:h,popoverOpen:A=!1,setPopoverOpen:T,size:_,...b}=e;const v=(0,o.useRef)(null),w=(0,o.useRef)(null);((e,a)=>{(0,o.useEffect)(()=>{const t=t=>{e.current&&!e.current.contains(t.target)&&a(t.target)};return document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}},[a,e])})(a||v,()=>{A&&T(!1)});return r?o.createElement("span",(0,l._)({},b,{"aria-hidden":0===m.length,className:i()(`${p}`,{[`${p}--hidden`]:0===m.length}),ref:a||v}),o.createElement(s.OperationalTag,{onClick:()=>{r?r(m):T(!A)},className:`${p}__popover-trigger`,size:_,text:`+${m.length}`})):o.createElement("span",(0,l._)({},b,{"aria-hidden":0===m.length,className:i()(`${p}`,{[`${p}--hidden`]:0===m.length}),ref:a||v}),o.createElement(s.Popover,{align:g,className:i()(n,`${p}__tagset-popover`),dropShadow:!0,highContrast:!0,onKeyDown:e=>{const{key:a}=e;"Escape"===a&&T(!1)},open:A,autoAlign:f},o.createElement(s.OperationalTag,{onClick:()=>T(!A),className:i()(`${p}__popover-trigger`),size:_,text:`+${m.length}`}),o.createElement(s.PopoverContent,null,o.createElement("div",{ref:w,className:`${p}__content`},o.createElement("ul",{className:`${p}__tag-list`},m.filter((e,a)=>m.length>t?a<t:a<=t).map((e,a)=>{const t={};if("tag"===d&&(t.type="high-contrast"),"default"===d&&(t.filter=!1),o.isValidElement(e))return o.createElement("li",{className:i()(`${p}__tag-item`,{[`${p}__tag-item--default`]:"default"===d,[`${p}__tag-item--tag`]:"tag"===d}),key:a},o.cloneElement(e,t))})),m.length>t&&o.createElement(s.Link,{className:`${p}__show-all-tags-link`,href:"",onClick:e=>{e.stopPropagation(),e.preventDefault(),T(!1),c()},role:"button"},h)))))});A.displayName="TagSetOverflow",A.propTypes={allTagsModalSearchThreshold:r.A.number,className:r.A.string,onOverflowClick:r.A.func,onShowAllClick:r.A.func.isRequired,overflowAlign:r.A.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:r.A.bool,overflowTags:r.A.arrayOf(r.A.object).isRequired,overflowType:r.A.oneOf(["default","tag"]),popoverOpen:r.A.bool,setPopoverOpen:r.A.func.isRequired,showAllTagsLabel:r.A.string,size:r.A.string};var T=t(73243),_=t(81029);const b="TagSet",v=`${c.Z.prefix}--tag-set`,w={measurementOffset:0,onOverflowTagChange:()=>{}};let y=o.forwardRef((e,a)=>{let{align:t="start",allTagsModalTarget:r,className:n,maxVisible:c,multiline:g,overflowAutoAlign:f,overflowAlign:m="bottom",overflowClassName:d,overflowType:p="default",allTagsModalAriaLabel:u,allTagsModalTitle:y="All tags",allTagsModalSearchLabel:E="Search all tags",allTagsModalSearchPlaceholderText:C="Search all tags",showAllTagsLabel:O="View all tags",onOverflowClick:$,tags:L,containingElementRef:N,measurementOffset:S=w.measurementOffset,onOverflowTagChange:k=w.onOverflowTagChange,...M}=e;const[R,x]=(0,o.useState)(3),[P,z]=(0,o.useState)([]),[D,q]=(0,o.useState)([]),[W,G]=(0,o.useState)(!1),B=(0,o.useRef)(null),H=a||B,V=(0,o.useRef)(null),Z=(0,o.useRef)(null),[j,K]=(0,o.useState)([]),U=(0,o.useRef)(null),[F,X]=(0,o.useState)(0),[I,J]=(0,o.useState)(!1),Q=()=>{G(!0)};(0,o.useEffect)(()=>{X(c||L?.length||0)},[c,L]),(0,o.useEffect)(()=>{const e=[];q(L&&L.length>0?L.map((a,t)=>{let{label:r,id:n,filter:i,onClose:c,...g}=a;return o.createElement("div",{key:t,className:`${v}__sizing-tag`,ref:a=>{null!=a&&(e[t]=a)}},"function"===typeof c||i?o.createElement(s.DismissibleTag,(0,l._)({},g,{"data-original-id":n,text:r})):o.createElement(s.Tag,(0,l._)({},g,{"data-original-id":n}),r))}):[]),K(e)},[L]);const Y=(0,o.useCallback)((e,a)=>{e?.(),a<=R-1&&J(!1)},[R]);(0,o.useEffect)(()=>{let e="md",a=L&&L.length>0?L.map((a,t)=>{let{label:r,onClose:n,filter:i,...c}=a;return t==L.length-1&&c.size&&(e=c.size),"function"===typeof n||i?o.createElement(s.DismissibleTag,(0,l._)({},c,{key:`displayed-tag-${t}`,onClose:()=>Y(n,t),text:r})):o.createElement(s.Tag,(0,l._)({},c,{key:`displayed-tag-${t}`}),r)}):[];const t=a.splice(R,a.length-R);a=a.map((e,a)=>o.createElement("div",{key:a,className:`${v}__displayed-tag`},e)),a.push(o.createElement(A,{allTagsModalSearchThreshold:10,overflowAutoAlign:f,className:d,onShowAllClick:Q,overflowTags:t,overflowAlign:m,overflowType:p,showAllTagsLabel:O,size:e,key:"displayed-tag-overflow",ref:U,popoverOpen:I,onOverflowClick:$,setPopoverOpen:J})),k?.(t),z(a)},[R,m,d,p,O,$,L,k,I,Y,f]);const ee=(0,o.useCallback)(()=>{if(g)return x(F);let e=0;if(j.length>0){const a="function"!==typeof N&&N?.current,t="number"===typeof S?S:0;let l=a?a.offsetWidth-t:H?.current.offsetWidth;for(const o in j){const a=j[o]?.offsetWidth||0;if(!(l>=a))break;l-=a,e+=1}if(e<j.length&&U.current)for(;e>0&&l<U.current.offsetWidth;)e-=1,l+=j[e].offsetWidth}x(e<1?0:F?Math.min(e,F):e)},[F,g,j,H,S,N]);(0,o.useEffect)(()=>{ee()},[ee,F,g,j]);(0,_.w)(V,()=>{ee()});const ae=N||H;return(0,_.w)(ae,()=>{ee()}),o.createElement("div",(0,l._)({},M,{className:i()([v,n]),ref:H},(0,T.hm)(b)),o.createElement("div",{className:i()([`${v}__space`,`${v}__space--align-${t}`])},o.createElement("div",{className:`${v}__tag-container ${v}__tag-container--hidden`,"aria-hidden":!0,ref:V},D),o.createElement("div",{className:i()([`${v}__tag-container`,g&&`${v}__tag-container--multiline`]),ref:Z},P)),!$&&o.createElement(h,{allTags:L,open:W,title:y,onClose:()=>{G(!1);const e=U.current?.querySelector("button");setTimeout(()=>e?.focus(),0)},modalAriaLabel:u,searchLabel:E,searchPlaceholder:C,portalTarget:r}))});y=c.Z.checkComponentEnabled(y,b);const E=(0,g.hL)(r.A.string,e=>{let{tags:a}=e;return a&&a.length>10}),C=Object.keys({red:"Red",magenta:"Magenta",purple:"Purple",blue:"Blue",cyan:"Cyan",teal:"Teal",green:"Green",gray:"Gray","cool-gray":"Cool-Gray","warm-gray":"Warm-Gray","high-contrast":"High-Contrast",outline:"Outline"});y.types=C,y.propTypes={align:r.A.oneOf(["start","center","end"]),allTagsModalAriaLabel:r.A.string,allTagsModalSearchLabel:r.A.string,allTagsModalSearchPlaceholderText:r.A.string,allTagsModalTarget:r.A.node,allTagsModalTitle:r.A.string,className:r.A.string,containingElementRef:r.A.object,maxVisible:r.A.number,measurementOffset:r.A.number,multiline:r.A.bool,onOverflowClick:r.A.func,onOverflowTagChange:r.A.func,overflowAlign:r.A.oneOf(["top","top-left","top-right","bottom","bottom-left","bottom-right","left","left-bottom","left-top","right","right-bottom","right-top"]),overflowAutoAlign:r.A.bool,overflowClassName:r.A.string,overflowType:r.A.oneOf(["default","tag"]),showAllTagsLabel:r.A.string,tags:r.A.arrayOf(r.A.shape({...s.Tag.propTypes,label:r.A.string.isRequired,type:r.A.oneOf(C)}))},y.displayName=b}}]);